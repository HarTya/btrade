require('dotenv').config()
const TelegramApi = require('node-telegram-bot-api')

const bot = new TelegramApi(process.env.TOKEN, { polling: true })

const startMessageOptions = {
    parse_mode: 'Markdown', reply_markup: JSON.stringify({
        inline_keyboard: [
            [{ text: 'ğŸ’¸ ĞšĞ°Ğ½Ğ°Ğ» + Ğ¡Ğ¸Ğ³Ğ½Ğ°Ğ»Ñ‹ - 10$ / Ğ¡ĞºĞ¸Ğ´ĞºĞ°: 50%', callback_data: '1' }],
            [{ text: 'ğŸ¤ VIP Ğ¢Ğ°Ñ€Ğ¸Ñ„ - 30$', callback_data: '2' }],
            [{ text: 'ğŸ‘‘ Ğ›Ğ¸Ñ‡Ğ½Ğ¾Ğµ Ğ’ĞµĞ´ĞµĞ½Ğ¸Ğµ - 50$', callback_data: '3' }]
        ]
    })
}

function buttonMessageOptions(callback_query_data) {
    if (callback_query_data === 1) {
        return {
            parse_mode: 'Markdown', reply_markup: JSON.stringify({
                inline_keyboard: [
                    [{ text: 'ĞŸÑ€Ğ¸Ğ¾Ğ±Ñ€ĞµÑÑ‚Ğ¸ ğŸ’¸ ĞšĞ°Ğ½Ğ°Ğ» + Ğ¡Ğ¸Ğ³Ğ½Ğ°Ğ»Ñ‹ ğŸ’¸', url: `https://t.me/${process.env.ADMIN_USERNAME}` }]
                ]
            })
        }
    } else if (callback_query_data === 2) {
        return {
            parse_mode: 'Markdown', reply_markup: JSON.stringify({
                inline_keyboard: [
                    [{ text: 'ĞŸÑ€Ğ¸Ğ¾Ğ±Ñ€ĞµÑÑ‚Ğ¸ ğŸ¤ VIP Ğ¢Ğ°Ñ€Ğ¸Ñ„ ğŸ¤', url: `https://t.me/${process.env.ADMIN_USERNAME}` }]
                ]
            })
        }
    } else if (callback_query_data === 3) {
        return {
            parse_mode: 'Markdown', reply_markup: JSON.stringify({
                inline_keyboard: [
                    [{ text: 'ĞŸÑ€Ğ¸Ğ¾Ğ±Ñ€ĞµÑÑ‚Ğ¸ ğŸ‘‘ Ğ›Ğ¸Ñ‡Ğ½Ğ¾Ğµ Ğ’ĞµĞ´ĞµĞ½Ğ¸Ğµ ğŸ‘‘', url: `https://t.me/${process.env.ADMIN_USERNAME}` }]
                ]
            })
        }
    }
}

async function sendMessage(chatId, text, user) {
    try {
        if (String(text).includes('/start')) {
            return bot.sendMessage(chatId, `*ğŸ– Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ, ${user}!\n\nĞ•ÑĞ»Ğ¸ Ğ’Ñ‹ ÑÑĞ´Ğ° Ğ·Ğ°ÑˆĞ»Ğ¸, Ğ·Ğ½Ğ°Ñ‡Ğ¸Ñ‚ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ Ğ²Ñ‹Ñ€Ğ²Ğ°Ñ‚ÑŒÑÑ Ğ¸Ğ· ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ Ğ¸ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ Ğ·Ğ°Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ñ‚ÑŒ ĞºÑÑˆ ğŸ¤‘*\n\n_ğŸ’¼ Ğ’ Ğ½Ğ°ÑˆĞµĞ¼ Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¾Ğ¼ Ğ¢ĞµĞ»ĞµĞ³Ñ€Ğ°Ğ¼ ĞšĞ°Ğ½Ğ°Ğ»Ğµ Ğ¼Ñ‹ Ğ´Ğ°ĞµĞ¼ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ñ‹ Ğ¿Ğ¾ Ñ‚Ñ€ĞµĞ¹Ğ´Ğ¸Ğ½Ğ³Ñƒ ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ²Ğ°Ğ»ÑÑ‚ Ğ½Ğ° ÑĞ°Ğ¼Ñ‹Ñ… Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ‹Ñ… Ğ±Ğ¸Ñ€Ğ¶Ğ°Ñ… Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ğ¸Ñ‡ĞºĞ¾Ğ². ĞĞ°ÑˆĞ¸ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ñ‹ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ÑÑ‚ ĞºĞ°Ğº Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ÑÑ‰Ğ¸Ğ¼, Ñ‚Ğ°Ğº Ğ¸ Ğ¾Ğ¿Ñ‹Ñ‚Ğ½Ñ‹Ğ¼ Ñ‚Ñ€ĞµĞ¹Ğ´ĞµÑ€Ğ°Ğ¼._\n\n*Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ğ¹ Ğ’Ğ°Ğ¼ Ñ‚Ğ°Ñ€Ğ¸Ñ„ Ğ¸ Ğ¿Ğ¾Ğ³Ğ½Ğ°Ğ»Ğ¸ ğŸš€*`,
                startMessageOptions
            )
        }
    } catch (err) {
        return bot.sendMessage(chatId, `Ğ£Ğ¿Ñ... Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ°`)
    }
}

bot.on('message', async msg => {
    const chatId = msg.chat.id
    const text = msg.text
    let user = msg.chat.first_name || msg.chat.username

    sendMessage(chatId, text, user)
})

async function sendButtonMessage(chatId, data) {
    try {
        if (data === '1') {
            return bot.sendMessage(chatId, '*ğŸ’¸ ĞšĞ°Ğ½Ğ°Ğ» + Ğ¡Ğ¸Ğ³Ğ½Ğ°Ğ»Ñ‹ ğŸ’¸*\n\nĞ—Ğ° *10$* Ğ’Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚Ğµ:\n\n_âœ… Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğº ğŸ”’_*Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¾Ğ¼Ñƒ Ğ¢ĞµĞ»ĞµĞ³Ñ€Ğ°Ğ¼ ĞšĞ°Ğ½Ğ°Ğ»Ñƒ*_\nĞ’ ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğ¼ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºÑƒÑÑ‚ÑÑ ĞĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¡Ğ¸Ğ³Ğ½Ğ°Ğ»Ñ‹, ĞĞ¾Ğ²Ğ¾ÑÑ‚Ğ¸, ĞŸĞ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ¸ Ğ¸ Ñ‚.Ğ´_\n\nĞ”Ğ»Ñ Ñ‚Ğ¾Ğ³Ğ¾ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº *ĞšĞ°Ğ½Ğ°Ğ»Ñƒ*\nĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Ğ½Ğ° ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ½Ğ¸Ğ¶Ğµ â¬‡ï¸ Ğ¸ Ğ½Ğ°Ğ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ\n*â€” "ĞšĞ°Ğ½Ğ°Ğ»"*',
                buttonMessageOptions(1)
            )
        } else if (data === '2') {
            return bot.sendMessage(chatId, '*ğŸ¤ VIP Ğ¢Ğ°Ñ€Ğ¸Ñ„ ğŸ¤*\n\nĞ—Ğ° *30$* Ğ’Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚Ğµ:\n\n_âœ… Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğº ğŸ”’_*Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¾Ğ¼Ñƒ Ğ¢ĞµĞ»ĞµĞ³Ñ€Ğ°Ğ¼ ĞšĞ°Ğ½Ğ°Ğ»Ñƒ*_\nĞ’ ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğ¼ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºÑƒÑÑ‚ÑÑ ĞĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¡Ğ¸Ğ³Ğ½Ğ°Ğ»Ñ‹, ĞĞ¾Ğ²Ğ¾ÑÑ‚Ğ¸, ĞŸĞ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ¸ Ğ¸ Ñ‚.Ğ´_\n\n_âœ… Ğ Ñ‚Ğ°ĞºĞ¶Ğµ: ÑĞºÑĞºĞ»ÑĞ·Ğ¸Ğ²Ğ½Ğ¾ Ğ´Ğ»Ñ Ñ‚ĞµÑ… ĞºÑ‚Ğ¾ Ğ¿Ñ€Ğ¸Ğ¾Ğ±Ñ€ĞµĞ» _*VIP*_,\nĞ½Ğ°ÑˆĞ° ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° Ğ²Ğ¸Ğ´Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½ÑƒÑ Ñ‚Ğ¾Ñ‡ĞºÑƒ Ğ²Ñ…Ğ¾Ğ´Ğ° Ğ´Ğ»Ñ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ»Ğ¸, ÑÑ€Ğ°Ğ·Ñƒ Ğ¶Ğµ Ğ´Ğ°ĞµÑ‚ Ğ¸Ğ½Ğ´Ğ¸Ğ²Ğ¸Ğ´ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸,\n_*ĞºĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ¸Ñ€ÑƒĞµÑ‚*_ Ğ½Ğ° Ğ¿Ñ€Ğ¾Ñ‚ÑĞ¶ĞµĞ½Ğ¸Ğ¸ Ğ²ÑĞµĞ¹ ÑĞ´ĞµĞ»ĞºĞ¸._\n\n*VIP - Ğ­Ñ‚Ğ¾ ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°Ñ‚ÑŒ ĞºÑ€ÑƒÑ‚Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ñ‚ ĞµĞ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ğ¾*\n\nĞ”Ğ»Ñ Ñ‚Ğ¾Ğ³Ğ¾ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº *VIP*\nĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Ğ½Ğ° ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ½Ğ¸Ğ¶Ğµ â¬‡ï¸ Ğ¸ Ğ½Ğ°Ğ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ\n*â€” "VIP"*',
                buttonMessageOptions(2)
            )
        } else if (data === '3') {
            return bot.sendMessage(chatId, '*ğŸ‘‘ Ğ›Ğ¸Ñ‡Ğ½Ğ¾Ğµ Ğ’ĞµĞ´ĞµĞ½Ğ¸Ğµ ğŸ‘‘*\n\nĞ—Ğ° *50$* Ğ’Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚Ğµ:\n\n_âœ… Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğº ğŸ”’_*Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¾Ğ¼Ñƒ Ğ¢ĞµĞ»ĞµĞ³Ñ€Ğ°Ğ¼ ĞšĞ°Ğ½Ğ°Ğ»Ñƒ*_\nĞ’ ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğ¼ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºÑƒÑÑ‚ÑÑ ĞĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¡Ğ¸Ğ³Ğ½Ğ°Ğ»Ñ‹, ĞĞ¾Ğ²Ğ¾ÑÑ‚Ğ¸, ĞŸĞ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ¸ Ğ¸ Ñ‚.Ğ´_\n\n_âœ… Ğ˜Ğ½Ğ´Ğ¸Ğ²Ğ¸Ğ´ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸_\n\n_âœ… Ğ•ÑĞ»Ğ¸ Ğ’Ñ‹ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼Ğ¸Ñ‚ĞµÑÑŒ Ñ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ»ĞµĞ¹ Ğ½Ğ° ĞšÑ€Ğ¸Ğ¿Ñ‚Ğ¾ Ğ±Ğ¸Ñ€Ğ¶Ğ°Ñ…, Ñ‚Ğ¾ Ğ´Ğ»Ñ Ñ‚ĞµÑ… ĞºÑ‚Ğ¾ Ğ¿Ñ€Ğ¸Ğ¾Ğ±Ñ€ĞµĞ» _*Ğ›Ğ¸Ñ‡Ğ½Ğ¾Ğµ Ğ’ĞµĞ´ĞµĞ½Ğ¸Ğµ*_ Ğ¾Ğ´Ğ¸Ğ½ Ğ¸Ğ· Ğ½Ğ°ÑˆĞ¸Ñ… Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸ÑÑ‚Ğ¾Ğ² Ğ²Ğ²ĞµĞ´ĞµÑ‚ Ğ’Ğ°Ñ Ğ² ĞºÑƒÑ€Ñ Ğ´ĞµĞ»Ğ°, Ğ¿Ğ¾Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼Ğ¸Ñ‚ Ñ Ğ°Ğ·Ğ°Ğ¼Ğ¸, Ğ¸ Ğ±ÑƒĞ´ĞµÑ‚ ğŸ§_*Ğ’Ğ°ÑˆĞ¸Ğ¼ ĞĞ°ÑÑ‚Ğ°Ğ²Ğ½Ğ¸ĞºĞ¾Ğ¼*\n\n_ğŸ”¥ Ğ Ñ‚Ğ°Ğº Ğ¶Ğµ, Ñ‚ĞµĞ¼ ĞºÑ‚Ğ¾ Ğ¿Ñ€Ğ¸Ğ¾Ğ±Ñ€ĞµĞ» _*Ğ›Ğ¸Ñ‡Ğ½Ğ¾Ğµ Ğ’ĞµĞ´ĞµĞ½Ğ¸Ğµ*_ Ğ¼Ñ‹ Ñ€Ğ°ÑÑĞºĞ°Ğ¶ĞµĞ¼ ÑĞµĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğµ ÑĞ¿Ğ¾ÑĞ¾Ğ±Ñ‹, Ğ±Ğ»Ğ°Ğ³Ğ¾Ğ´Ğ°Ñ€Ñ ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¼ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ·Ğ°ĞºÑ€Ñ‹Ğ²Ğ°Ñ‚ÑŒ ğŸ“ˆ_*Ğ¡Ğ°Ğ¼Ñ‹Ğµ ĞŸÑ€Ğ¾Ñ„Ğ¸Ñ‚Ğ½Ñ‹Ğµ Ğ¡Ğ´ĞµĞ»ĞºĞ¸*\n\nĞ”Ğ»Ñ Ñ‚Ğ¾Ğ³Ğ¾ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº *Ğ›Ğ¸Ñ‡Ğ½Ğ¾Ğ¼Ñƒ Ğ’ĞµĞ´ĞµĞ½Ğ¸Ñ*\nĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Ğ½Ğ° ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ½Ğ¸Ğ¶Ğµ â¬‡ï¸ Ğ¸ Ğ½Ğ°Ğ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ\n*â€” "Ğ›Ğ¸Ñ‡Ğ½Ğ¾Ğµ Ğ’ĞµĞ´ĞµĞ½Ğ¸Ğµ"*',
                buttonMessageOptions(3)
            )
        }
    } catch (err) {
        return bot.sendMessage(chatId, `Ğ£Ğ¿Ñ... Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ°`)
    }
}

bot.on('callback_query', msg => {
    const chatId = msg.message.chat.id
    const data = msg.data

    sendButtonMessage(chatId, data)
})